<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>UwU Caf√© ‚òïüêæ</title>

<style>
  body { 
    background-color: #ffe4ec;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 100 100'%3E%3Cpath d='M30.5,45.3c3.4,0,6.2-4.1,6.2-9.1s-2.8-9.1-6.2-9.1s-6.2,4.1-6.2,9.1S27.1,45.3,30.5,45.3z M43.4,30.9c3.4,0,6.2-4.1,6.2-9.1 s-2.8-9.1-6.2-9.1s-6.2,4.1-6.2,9.1S40,30.9,43.4,30.9z M57,30.9c3.4,0,6.2-4.1,6.2-9.1s-2.8-9.1-6.2-9.1c-3.4,0-6.2,4.1-6.2,9.1 S53.5,30.9,57,30.9z M69.5,45.3c3.4,0,6.2-4.1,6.2-9.1s-2.8-9.1-6.2-9.1s-6.2,4.1-6.2,9.1S66.1,45.3,69.5,45.3z M50,48.7 c-10.7,0-19.4,8.3-19.4,18.5c0,5.2,2.3,9.8,6,13c2.4,2.1,5.1,3.8,8.1,4.8c1.7,0.6,3.5,0.9,5.3,0.9c1.8,0,3.6-0.3,5.3-0.9 c3-1,5.7-2.7,8.1-4.8c3.7-3.2,6-7.8,6-13C69.4,57,60.7,48.7,50,48.7z' fill='%23332222' fill-opacity='0.12'/%3E%3C/svg%3E");
    background-attachment: fixed;
    font-family: 'Arial', sans-serif;
    margin: 0; padding: 20px;
  }

  .container { 
    max-width: 500px; margin: 20px auto; 
    background: rgba(255, 255, 255, 0.98); 
    padding: 30px; border-radius: 30px; 
    box-shadow: 0 15px 35px rgba(0,0,0,0.2); 
    border: 2px solid #ffccd5;
  }

  h1 { text-align: center; color: #ff69b4; margin-bottom: 5px; }
  label { font-weight: bold; color: #4a332d; display: block; margin-top: 15px; }
  
  input, select, textarea { 
    width: 100%; padding: 12px; margin-top: 6px; 
    border-radius: 15px; border: 1.5px solid #ffccd5; 
    box-sizing: border-box;
  }

  #listaVisual { 
    background: #fffafa; border-radius: 15px; padding: 15px; 
    margin-top: 10px; border: 2px dashed #ffb6c1; 
  }
  
  .total-seccion {
    background: #ff69b4; color: white;
    padding: 15px; border-radius: 15px;
    margin-top: 20px; text-align: center;
    font-weight: bold; font-size: 18px;
  }

  button { 
    width: 100%; color: white; padding: 15px; border: none; 
    border-radius: 25px; font-size: 16px; font-weight: bold;
    cursor: pointer; transition: 0.3s; margin-top: 10px;
  }

  .btn-add { background: #d87093; }
  .btn-submit { background: #ff4da6; margin-top: 20px; }
  button:hover { opacity: 0.9; transform: scale(1.02); }

  .footer { text-align: center; font-size: 12px; color: #8b435c; margin-top: 25px; }
</style>
</head>

<body>
<div class="container">
  <div style="text-align:center;">
    <img src="logo.png" alt="UwU Caf√© Logo" style="width:120px;">
    <h1>UwU Caf√©</h1>
    <p style="color: #d87093; font-weight: bold;">Caja de Pedidos üêæ</p>
  </div>

  <label>üè™ Negocio</label>
  <input type="text" id="negocio" placeholder="Nombre del negocio">

  <label>üì¶ Producto</label>
  <select id="producto">
    <optgroup label="üßÅ Comida">
      <option value="30">Cupcake de Fresa - 30$</option>
      <option value="30">Cupcake de Lim√≥n - 30$</option>
      <option value="30">Muffin de Chocolate - 30$</option>
      <option value="25">Gofre con Nutella - 25$</option>
      <option value="25">Crep con Nutella - 25$</option>
      <option value="20">Mochis - 20$</option>
      <option value="15">Helado de Fresa - 15$</option>
    </optgroup>
    <optgroup label="üßã Bebidas">
      <option value="17">Capuchino (Varios) - 17$</option>
      <option value="16">Batido (Varios) - 16$</option>
      <option value="20">T√© Boba - 20$</option>
    </optgroup>
    <optgroup label="üåü Exclusivos">
      <option value="25">Remune - 25$</option>
      <option value="25">Batido Gominola - 25$</option>
    </optgroup>
  </select>

  <label>üî¢ Cantidad</label>
  <input type="number" id="cantidad" min="1" value="1">

  <button type="button" class="btn-add" onclick="agregarAlCarrito()">‚ûï A√±adir al Ticket</button>

  <div id="resumenContenedor" style="display:none;">
    <label>üõí Detalle del Ticket:</label>
    <div id="listaVisual"></div>

    <label>üè∑Ô∏è Aplicar Descuento</label>
    <select id="descuento" onchange="calcularTotal()">
        <option value="0">Sin descuento (0%)</option>
        <option value="0.05">Descuento Amigo (5%)</option>
        <option value="0.10">Descuento Socio (10%)</option>
        <option value="0.15">Evento Especial (15%)</option>
        <option value="0.20">Super Descuento (20%)</option>
    </select>

    <div class="total-seccion">
        Total a Pagar: <span id="precioFinal">0</span>$
    </div>
  </div>

  <label>üìù Notas RP</label>
  <textarea id="notas" rows="2" placeholder="Notas adicionales..."></textarea>

  <button type="button" class="btn-submit" onclick="enviarPedido()">Enviar Pedido üíñ</button>

  <div class="footer">UwU Caf√© ‚Ä¢ Dishes & Desserts üêæ</div>
</div>

<script>
const webhookURL = "https://discord.com/api/webhooks/1466423838408441918/aW5KVRVkat7Tb0-BhimAaius-_P7Cd57yxXSw5-a_l_Vl_ZviHU2sDipe47YKEQUEgXD";
let carrito = [];
let subtotalGlobal = 0;

function agregarAlCarrito() {
  const combo = document.getElementById("producto");
  const nombreProd = combo.options[combo.selectedIndex].text;
  const precioUnidad = parseInt(combo.value);
  const cant = parseInt(document.getElementById("cantidad").value);

  if(cant < 1) return alert("Cantidad no v√°lida");

  carrito.push({ nombre: nombreProd, cantidad: cant, precio: precioUnidad * cant });
  actualizarVista();
}

function actualizarVista() {
  const contenedor = document.getElementById("resumenContenedor");
  const listaDiv = document.getElementById("listaVisual");
  contenedor.style.display = "block";
  
  listaDiv.innerHTML = "";
  subtotalGlobal = 0;

  carrito.forEach((item) => {
    listaDiv.innerHTML += `<div class='item-pedido'><span>${item.cantidad}x ${item.nombre}</span> <b>${item.precio}$</b></div>`;
    subtotalGlobal += item.precio;
  });

  calcularTotal();
}

function calcularTotal() {
  const descPorcentaje = parseFloat(document.getElementById("descuento").value);
  const ahorro = subtotalGlobal * descPorcentaje;
  const total = subtotalGlobal - ahorro;
  document.getElementById("precioFinal").innerText = Math.round(total);
}

function enviarPedido() {
  const negocio = document.getElementById("negocio").value;
  const precioFinal = document.getElementById("precioFinal").innerText;
  const descTexto = document.getElementById("descuento").options[document.getElementById("descuento").selectedIndex].text;

  if(!negocio || carrito.length === 0) return alert("Completa el negocio y a√±ade productos.");

  let listaTexto = "";
  carrito.forEach(i => listaTexto += `- ${i.cantidad}x ${i.nombre} (${i.precio}$)\n`);

  const data = {
    embeds: [{
      title: "üêæ NUEVO TICKET UwU CAF√â üêæ",
      color: 16738740,
      fields: [
        { name: "üè™ Negocio", value: negocio, inline: true },
        { name: "üè∑Ô∏è Descuento", value: descTexto, inline: true },
        { name: "üìã Productos", value: listaTexto },
        { name: "üí∞ TOTAL A COBRAR", value: `**${precioFinal}$**` }
      ],
      timestamp: new Date()
    }]
  };

  fetch(webhookURL, { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify(data) })
    .then(() => {
        alert("¬°Pedido enviado! Total: " + precioFinal + "$");
        location.reload(); 
    });
}
</script>
</body>
</html>